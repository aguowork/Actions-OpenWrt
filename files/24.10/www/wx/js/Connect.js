import{e,v as a,j as s,g as l,i as t,u as n,y as r,z as o,A as i,J as c,f as u,l as p,m as d,B as v,w as m,F as b,r as y,c as f,o as x,G as w,C as h,t as k,k as g}from"./vue-vendor.js";import{u as C}from"./wireless2.js";import{c as j,a as W,T as F}from"./index.js";import{D as V}from"./Dialog.js";import{a as L,S}from"./Select.js";import{E as A,a as G,b as N,c as P}from"./validation.js";import{W as U}from"./wifi.js";import{L as _}from"./lock.js";import{R as q}from"./radio.js";import{L as E}from"./lock-open.js";
/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=j("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),M=j("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),z=j("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),D={class:"space-y-4"},T={class:"flex items-center gap-3 px-1"},B={class:"w-9 h-9 rounded-xl bg-gradient-to-br from-primary-500/20 to-primary-600/10 flex items-center justify-center"},J={class:"flex items-center gap-3"},O={class:"w-10 h-10 rounded-lg bg-primary-500/20 flex items-center justify-center"},R={class:"form-group"},H={class:"form-label"},I={class:"form-group"},Q={class:"form-label"},X={key:0,class:"form-group"},Y={class:"form-label"},Z={class:"relative group/input"},$=["type"],ee={class:"form-group"},ae={class:"form-label"},se={class:"flex gap-3 pt-2"},le={class:"max-h-72 overflow-y-auto -mx-2 scrollbar-smart"},te={key:0,class:"text-center py-12"},ne={class:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-slate-700/50 mb-4"},re=["onClick"],oe={class:"flex items-center gap-3"},ie={class:"w-10 h-10 rounded-lg bg-primary-500/20 flex items-center justify-center"},ce={class:"text-white font-medium"},ue={class:"flex gap-2"},pe={class:"badge"},de={class:"space-y-4"},ve={class:"flex items-start gap-3 p-4 rounded-xl bg-warning-500/10 border border-warning-500/20"},me=e({__name:"Connect",setup(e){const j=y(!1),me=h(),be=C(),ye=W(),fe=y(!1),xe=y(!1),we=y({ssid:"",encryption:"psk2",key:"",band:""}),he=[{value:"psk2",label:"WPA2-PSK (强安全性)"},{value:"sae",label:"WPA3-SAE (强安全性)"},{value:"psk",label:"WPA-PSK (弱安全性)"},{value:"owe",label:"OWE (开放网络)"},{value:"none",label:"无加密 (开放网络)"}],ke=f(()=>"none"!==we.value.encryption&&"owe"!==we.value.encryption);function ge(){je()&&(xe.value=!0)}async function Ce(){if(!je())return;await be.saveNetwork({name:we.value.ssid,encryption:we.value.encryption,password:we.value.key,band:we.value.band})?(ye.success("配置已保存"),we.value={ssid:"",encryption:"psk2",key:"",band:""}):ye.error(be.error||"保存失败")}function je(){return N(we.value.ssid)?we.value.band?ke.value&&!we.value.key?(ye.error("请输入WiFi密码"),!1):!(ke.value&&!P(we.value.key))||(ye.error("密码只能包含英文、数字和符号，长度8-63位"),!1):(ye.error("请选择频段"),!1):(ye.error("请输入有效的WiFi名称 (1-32字符)"),!1)}async function We(){xe.value=!1,ye.showLoading("正在尝试连接"),await be.saveNetwork({name:we.value.ssid,encryption:we.value.encryption,password:we.value.key,band:we.value.band});await be.connectToWiFi({ssid:we.value.ssid,encryption:we.value.encryption,key:we.value.key,band:we.value.band.toLowerCase()})?ye.startCountdown(60,()=>{ye.hideLoading(),me.push({name:"status"})}):(ye.hideLoading(),ye.error(be.error||"连接失败"))}return a(()=>{be.fetchKnownNetworks()}),(e,a)=>(x(),s(b,null,[l("div",D,[l("div",T,[l("div",B,[t(n(M),{class:"w-4 h-4 text-primary-400"})]),a[11]||(a[11]=l("div",null,[l("h2",{class:"text-lg font-bold text-white"},"连接热点"),l("p",{class:"text-[10px] text-slate-500"},"Connect WiFi")],-1))]),l("form",{class:"card space-y-5",onSubmit:a[6]||(a[6]=r(()=>{},["prevent"]))},[l("button",{class:"w-full flex items-center justify-between p-4 rounded-xl bg-primary-500/10 border border-primary-500/20 hover:bg-primary-500/15 transition-colors group",onClick:a[0]||(a[0]=e=>fe.value=!0)},[l("div",J,[l("div",O,[t(n(L),{class:"w-5 h-5 text-primary-400"})]),a[12]||(a[12]=l("div",{class:"text-left"},[l("p",{class:"text-white font-medium"},"选择已知热点"),l("p",{class:"text-xs text-slate-500"},"从已保存的网络中选择")],-1))]),t(n(K),{class:"w-5 h-5 text-slate-500 group-hover:text-primary-400 transition-colors"})]),a[19]||(a[19]=l("div",{class:"divider"},null,-1)),l("div",R,[l("label",H,[t(n(U),{class:"w-4 h-4"}),a[13]||(a[13]=l("span",null,"WiFi 名称",-1))]),o(l("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>we.value.ssid=e),type:"text",class:"input",placeholder:"输入 WiFi 名称"},null,512),[[i,we.value.ssid]])]),l("div",I,[l("label",Q,[t(n(z),{class:"w-4 h-4"}),a[14]||(a[14]=l("span",null,"安全性",-1))]),t(S,{modelValue:we.value.encryption,"onUpdate:modelValue":a[2]||(a[2]=e=>we.value.encryption=e),options:he,placeholder:"选择加密方式",label:"选择加密方案"},null,8,["modelValue"])]),ke.value?(x(),s("div",X,[l("label",Y,[t(n(_),{class:"w-4 h-4"}),a[15]||(a[15]=l("span",null,"WiFi 密码",-1))]),l("div",Z,[o(l("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>we.value.key=e),type:j.value?"text":"password",class:"input pr-10",placeholder:"输入 WiFi 密码",autocomplete:"off"},null,8,$),[[c,we.value.key]]),l("button",{type:"button",class:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 hover:text-primary-400 p-1 transition-colors",onClick:a[4]||(a[4]=e=>j.value=!j.value)},[(x(),u(p(j.value?n(A):n(G)),{class:"w-4 h-4"}))])])])):d("",!0),l("div",ee,[l("label",ae,[t(n(q),{class:"w-4 h-4"}),a[16]||(a[16]=l("span",null,"WiFi 频段",-1))]),t(S,{modelValue:we.value.band,"onUpdate:modelValue":a[5]||(a[5]=e=>we.value.band=e),options:[{value:"2G",label:"2.4G"},{value:"5G",label:"5G"}],placeholder:"选择 WiFi 频段",label:"选择 WiFi 频段"},null,8,["modelValue"])]),l("div",se,[l("button",{class:"btn btn-secondary flex-1",onClick:Ce},[t(n(L),{class:"w-4 h-4"}),a[17]||(a[17]=v(" 仅保存 ",-1))]),l("button",{class:"btn btn-primary flex-1",onClick:ge},[t(n(M),{class:"w-4 h-4"}),a[18]||(a[18]=v(" 保存并连接 ",-1))])])],32)]),t(V,{visible:fe.value,title:"选择已知热点",icon:n(L),onClose:a[8]||(a[8]=e=>fe.value=!1)},{footer:m(()=>[l("button",{class:"btn btn-secondary w-full",onClick:a[7]||(a[7]=e=>fe.value=!1)},"取消")]),default:m(()=>[l("div",le,[0===n(be).knownNetworks.length?(x(),s("div",te,[l("div",ne,[t(n(L),{class:"w-8 h-8 text-slate-500"})]),a[20]||(a[20]=l("p",{class:"text-slate-400 mb-1"},"暂无已知热点",-1)),a[21]||(a[21]=l("p",{class:"text-xs text-slate-500"},"请先手动输入添加",-1))])):d("",!0),(x(!0),s(b,null,w(n(be).knownNetworks,e=>(x(),s("div",{key:e.name,class:"flex justify-between items-center p-4 mx-2 mb-2 rounded-xl cursor-pointer transition-all duration-150 bg-dark-300/50 hover:bg-primary-500/10 border border-slate-700/50 hover:border-primary-500/30",onClick:a=>function(e){we.value.ssid=e.name,we.value.encryption=e.encryption||"psk2",we.value.key=e.password||"",we.value.band=e.band.toUpperCase(),fe.value=!1}(e)},[l("div",oe,[l("div",ie,[t(n(U),{class:"w-5 h-5 text-primary-400"})]),l("span",ce,k(e.name),1)]),l("div",ue,[l("span",pe,k(e.band),1),(x(),u(p("none"===e.encryption||"owe"===e.encryption?n(E):n(_)),{class:g(["w-4 h-4","none"===e.encryption||"owe"===e.encryption?"text-warning-400":"text-success-400"])},null,8,["class"]))])],8,re))),128))])]),_:1},8,["visible","icon"]),t(V,{visible:xe.value,title:"保存确认",icon:n(M),onClose:a[10]||(a[10]=e=>xe.value=!1)},{footer:m(()=>[l("button",{class:"btn btn-secondary flex-1",onClick:a[9]||(a[9]=e=>xe.value=!1)},"取消"),l("button",{class:"btn btn-primary flex-1",onClick:We},[t(n(M),{class:"w-4 h-4"}),a[24]||(a[24]=v(" 确定连接 ",-1))])]),default:m(()=>[l("div",de,[a[23]||(a[23]=l("p",{class:"text-slate-300"},"确定要保存配置并连接吗？",-1)),l("div",ve,[t(n(F),{class:"w-5 h-5 text-warning-400 flex-shrink-0 mt-0.5"}),a[22]||(a[22]=l("div",{class:"text-sm"},[l("p",{class:"text-warning-300 font-medium mb-1"},"WiFi 将会重启"),l("p",{class:"text-slate-400"},"系统重启期间，WiFi连接将会断开。")],-1))])])]),_:1},8,["visible","icon"])],64))}});
/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */export{me as default};
