import{d as a,r as e}from"./vue-vendor.js";import{a as n,b as t,c as r,d as s,e as u,f as l,h as c,i,j as o,r as v,s as f}from"./Dialog.js";const y=a("wireless",()=>{const a=e(null),y=e([]),w=e({}),g=e(null),h=e([]),m=e(!1),E=e(!1),d=e(null);async function S(){E.value=!0,d.value=null;try{y.value=await t()}catch(a){d.value=a instanceof Error?a.message:"获取热点列表失败"}finally{E.value=!1}}return{connectionStatus:a,knownNetworks:y,wirelessSettings:w,retryStatus:g,scannedNetworks:h,isScanning:m,isLoading:E,error:d,fetchConnectionStatus:async function(){E.value=!0,d.value=null;try{a.value=await n()}catch(e){d.value=e instanceof Error?e.message:"获取状态失败"}finally{E.value=!1}},fetchKnownNetworks:S,fetchWirelessSettings:async function(){E.value=!0,d.value=null;try{w.value=await r()}catch(a){d.value=a instanceof Error?a.message:"获取无线设置失败"}finally{E.value=!1}},saveWirelessSettings:async function(a){E.value=!0,d.value=null;try{return await s(a),!0}catch(e){return d.value=e instanceof Error?e.message:"保存设置失败",!1}finally{E.value=!1}},connectToWiFi:async function(a){E.value=!0,d.value=null;try{return await u(a),!0}catch(e){return d.value=e instanceof Error?e.message:"连接失败",!1}finally{E.value=!1}},saveNetwork:async function(a){try{return await l(a),await S(),!0}catch(e){return d.value=e instanceof Error?e.message:"保存失败",!1}},deleteNetworks:async function(a){try{return await c(a),await S(),!0}catch(e){return d.value=e instanceof Error?e.message:"删除失败",!1}},updateNetworkOrder:async function(a){try{return await i(a),y.value=a,!0}catch(e){return d.value=e instanceof Error?e.message:"保存排序失败",!1}},fetchRetryStatus:async function(){E.value=!0,d.value=null;try{g.value=await o()}catch(a){d.value=a instanceof Error?a.message:"获取重试状态失败"}finally{E.value=!1}},resetRetryCount:async function(){E.value=!0,d.value=null;try{return await v(),g.value&&(g.value.cq_times=0),!0}catch(a){return d.value=a instanceof Error?a.message:"重置重试计数失败",!1}finally{E.value=!1}},scanWifi:async function(a="2g"){m.value=!0,h.value=[],d.value=null;try{const e=await f(a);return h.value=e.results||[],!0}catch(e){return d.value=e instanceof Error?e.message:"扫描失败",!1}finally{m.value=!1}},clearScannedNetworks:function(){h.value=[]}}});export{y as u};
